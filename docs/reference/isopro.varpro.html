<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Identify Anomalous Data — isopro.varpro • Model-Independent Variable Selection with Variable Priority</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Identify Anomalous Data — isopro.varpro"><meta property="og:description" content="Use isolation forests to identify rare/anomalous data."><meta property="og:image" content="https://www.randomforestsrc.org/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-WZWXVK817Z"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WZWXVK817Z');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Model-Independent Variable Selection with Variable Priority</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.43</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/getstarted.html">
    <span class="fas fa-home fa-lg"></span>
     
    Getting Started
  </a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="https://github.com/kogalur/varPro/issues" class="external-link">Bug Reporting</a>
</li>
<li>
  <a href="https://github.com/kogalur/varPro/discussions" class="external-link">Discussions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="https://github.com/kogalur/varPro/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/kogalur/varPro/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Identify Anomalous Data</h1>
    
    <div class="hidden name"><code>isopro.varpro.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use isolation forests to identify rare/anomalous data.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">isopro.varpro</span><span class="op">(</span><span class="va">object</span>,</span>
<span>         method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"unsupv"</span>, <span class="st">"rnd"</span>, <span class="st">"auto"</span><span class="op">)</span>,</span>
<span>         sampsize <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">2</span><span class="op">^</span><span class="fl">6</span>, <span class="fl">.632</span> <span class="op">*</span> <span class="va">x</span><span class="op">)</span><span class="op">}</span>,</span>
<span>         ntree <span class="op">=</span> <span class="fl">500</span>, nodesize <span class="op">=</span> <span class="fl">1</span>,</span>
<span>         formula <span class="op">=</span> <span class="cn">NULL</span>, data <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>VarPro object obtained from previous call.</p></dd>


  <dt>method</dt>
<dd><p>Isolation forest method to be used.  Choices are
    "unsupv" (unsupervised analysis, the default), "rnd" (pure random
    splitting) and "auto" (auto-encoder, a type of multivariate
    forest).</p></dd>


  <dt>sampsize</dt>
<dd><p>Function specifying the sample size used for
    constructing a tree where sampling is without replacement.  Can also
    be specified using a number.</p></dd>


  <dt>ntree</dt>
<dd><p>Number of trees.</p></dd>


  <dt>nodesize</dt>
<dd><p>Minumum terminal node size.</p></dd>

  
  <dt>formula</dt>
<dd><p>Formula for when supervised isolation forest is to be used.
    Ignored if <code>object</code> is provided.</p></dd>


  <dt>data</dt>
<dd><p>Data frame used for fitting isolation forest.  Ignored if
  <code>object</code> is provided.</p></dd>

    
  <dt>...</dt>
<dd><p>Additional options to be passed to <code class="command">rfsrc</code>.</p></dd>

  
</dl></div>
    <div id="details">
    <h2>Details</h2>
    

<p>Isolation Forest (Liu et al., 2008) is a random forest procedure for
  detecting anomalous data.  In the original method, random trees are
  constructed using pure random splitting with each tree constructed
  from a subsample of the data.  Typically the subsample size is much
  smaller than 0.632, the rate used with random forests.  The idea
  is that under random splitting, and because of extreme subsampling,
  rare or anomalous data will tend to split early and become isolated
  very quickly.  Because of this, the depth of an observation, defined
  as the number of splits needed to be become a terminal node, can be
  used to find anomalous observations:  anomalous data points are
  those with relatively small depth values.</p>
<p>There are several ways to run the code.  The default is to provide a
  formula and a data set via options <code>formula</code> and <code>data</code>.  In
  the case of unsupervised analysis (which is the usual application of
  isolation forest), the user only needs to pass in a data set using
  <code>data</code>.  In this setting, the option <code>method</code> is applicable
  (see above).  In the case where both a formula and data set is
  provided, then a supervised analysis is run.  The option <code>method</code>
  is no longer applicable in this case.  This is the less conventional
  approach.</p>
<p>Another approach (also unconventional) is to pass a VarPro object
  obtained from a previous call (typically this being an unsupervised
  analysis using <code>unsupv</code>, but this is not the only choice).
  Unsupervised isolation forests is then applied to the dimension
  reduced x matrix from the VarPro call.  Therefore this results in an
  analysis similar to using only the option <code>data</code>, however the
  difference and advantage is that dimension reduction is achieved via
  VarPro.</p>
<p>Users should experiment with the type of isolation forest method used.
  This is because while the original isolation forest performs well,
  there are many examples where it can be improved upon.  See the
  examples below which illustrate that the pure random splitting "rnd"
  method may not always be the best.</p>
<p>Computationally "rnd" is the fastest method followed by "unsupv".  The
  slowest is "auto" which should be used in low-dimensional problems.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    

<p>Min Lu and Hemant Ishwaran</p>
    </div>
    <div id="references">
    <h2>References</h2>
    

<p>Liu, Fei Tony, Kai Ming Ting, and Zhi-Hua Zhou. (2008). Isolation
  forest.  2008 Eighth IEEE International Conference on Data
  Mining. IEEE.</p>
<p>Lu M. and Ishwaran H. (2022).  Model-Independent Variable Selection
  via the Rule-based Variable Priority (VarPro).</p>


    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code class="command"><a href="predict.isopro.varpro.html">predict.isopro</a></code>
  <code class="command"><a href="unsupv.varpro.html">unsupv.varpro</a></code>
  <code class="command"><a href="varpro.html">varpro</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## satellite data: convert some of the classes to "outliers"</span></span>
<span><span class="co">## unsupervised isopro analysis</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span></span>
<span><span class="co">## load data, make three of the classes into outliers</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Satellite</span>, package <span class="op">=</span> <span class="st">"mlbench"</span><span class="op">)</span></span>
<span><span class="va">is.outlier</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">is.element</a></span><span class="op">(</span><span class="va">Satellite</span><span class="op">$</span><span class="va">classes</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"damp grey soil"</span>, <span class="st">"cotton crop"</span>, <span class="st">"vegetation stubble"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## remove class labels, make unsupervised data</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">Satellite</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">Satellite</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">Satellite</span><span class="op">)</span> <span class="op">!=</span> <span class="st">"classes"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co">## isopro calls</span></span>
<span><span class="va">i.rnd</span> <span class="op">&lt;-</span> <span class="fu">isopro</span><span class="op">(</span>data<span class="op">=</span><span class="va">x</span>, method <span class="op">=</span> <span class="st">"rnd"</span>, sampsize<span class="op">=</span><span class="fl">32</span><span class="op">)</span></span>
<span><span class="va">i.uns</span> <span class="op">&lt;-</span> <span class="fu">isopro</span><span class="op">(</span>data<span class="op">=</span><span class="va">x</span>, method <span class="op">=</span> <span class="st">"unsupv"</span>, sampsize<span class="op">=</span><span class="fl">32</span><span class="op">)</span></span>
<span><span class="va">i.aut</span> <span class="op">&lt;-</span> <span class="fu">isopro</span><span class="op">(</span>data<span class="op">=</span><span class="va">x</span>, method <span class="op">=</span> <span class="st">"auto"</span>, sampsize<span class="op">=</span><span class="fl">32</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## AUC and precision recall (computed using true class label information)</span></span>
<span><span class="va">perf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu">get.iso.performance</span><span class="op">(</span><span class="va">is.outlier</span>,<span class="va">i.rnd</span><span class="op">$</span><span class="va">howbad</span><span class="op">)</span>,</span>
<span>              <span class="fu">get.iso.performance</span><span class="op">(</span><span class="va">is.outlier</span>,<span class="va">i.uns</span><span class="op">$</span><span class="va">howbad</span><span class="op">)</span>,</span>
<span>              <span class="fu">get.iso.performance</span><span class="op">(</span><span class="va">is.outlier</span>,<span class="va">i.aut</span><span class="op">$</span><span class="va">howbad</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">perf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rnd"</span>, <span class="st">"unsupv"</span>, <span class="st">"auto"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">perf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># \donttest{</span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## boston housing analysis</span></span>
<span><span class="co">## isopro analysis using a previous VarPro (supervised) object </span></span>
<span><span class="co">##</span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">BostonHousing</span>, package <span class="op">=</span> <span class="st">"mlbench"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## call varpro first and then isopro</span></span>
<span><span class="va">o</span> <span class="op">&lt;-</span> <span class="fu"><a href="varpro.html">varpro</a></span><span class="op">(</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, <span class="va">BostonHousing</span><span class="op">)</span></span>
<span><span class="va">o.iso</span> <span class="op">&lt;-</span> <span class="fu">isopro</span><span class="op">(</span><span class="va">o</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## identify data with extreme percentiles</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">BostonHousing</span><span class="op">[</span><span class="va">o.iso</span><span class="op">$</span><span class="va">howbad</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">o.iso</span><span class="op">$</span><span class="va">howbad</span>, <span class="fl">.01</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## boston housing analysis</span></span>
<span><span class="co">## supervised isopro analysis - direct call using formula/data</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">BostonHousing</span>, package <span class="op">=</span> <span class="st">"mlbench"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## direct approach uses formula and data options</span></span>
<span><span class="va">o.iso</span> <span class="op">&lt;-</span> <span class="fu">isopro</span><span class="op">(</span>formula<span class="op">=</span><span class="va">medv</span><span class="op">~</span><span class="va">.</span>, data<span class="op">=</span><span class="va">BostonHousing</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## identify data with extreme percentiles</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">BostonHousing</span><span class="op">[</span><span class="va">o.iso</span><span class="op">$</span><span class="va">howbad</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">o.iso</span><span class="op">$</span><span class="va">howbad</span>, <span class="fl">.01</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## monte carlo experiment to study different methods</span></span>
<span><span class="co">## unsupervised isopro analysis</span></span>
<span><span class="co">##</span></span>
<span><span class="co">## ------------------------------------------------------------</span></span>
<span></span>
<span><span class="co">## monte carlo parameters</span></span>
<span><span class="va">nrep</span> <span class="op">&lt;-</span> <span class="fl">25</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span>
<span></span>
<span><span class="co">## simulation function</span></span>
<span><span class="va">twodimsim</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">=</span><span class="fl">1000</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">cluster1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">.4</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">cluster2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="op">+</span><span class="fl">1</span>, <span class="fl">.2</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="op">+</span><span class="fl">1</span>, <span class="fl">.4</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">outlier</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>    y <span class="op">=</span>  <span class="fl">1</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">cluster1</span>, <span class="va">cluster2</span>, <span class="va">outlier</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">is.outlier</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="fl">2</span> <span class="op">*</span> <span class="va">n</span><span class="op">)</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, is.outlier<span class="op">=</span><span class="va">is.outlier</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">## monte carlo loop</span></span>
<span><span class="va">hbad</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">nrep</span>, <span class="kw">function</span><span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"iteration:"</span>, <span class="va">b</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="co">## draw the data</span></span>
<span>  <span class="va">simO</span> <span class="op">&lt;-</span> <span class="fu">twodimsim</span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">simO</span><span class="op">$</span><span class="va">x</span></span>
<span>  <span class="va">is.outlier</span> <span class="op">&lt;-</span> <span class="va">simO</span><span class="op">$</span><span class="va">is.outlier</span></span>
<span>  <span class="co">## iso pro calls</span></span>
<span>  <span class="va">i.rnd</span> <span class="op">&lt;-</span> <span class="fu">isopro</span><span class="op">(</span>data<span class="op">=</span><span class="va">x</span>, method <span class="op">=</span> <span class="st">"rnd"</span><span class="op">)</span></span>
<span>  <span class="va">i.uns</span> <span class="op">&lt;-</span> <span class="fu">isopro</span><span class="op">(</span>data<span class="op">=</span><span class="va">x</span>, method <span class="op">=</span> <span class="st">"unsupv"</span><span class="op">)</span></span>
<span>  <span class="va">i.aut</span> <span class="op">&lt;-</span> <span class="fu">isopro</span><span class="op">(</span>data<span class="op">=</span><span class="va">x</span>, method <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span></span>
<span>  <span class="co">## save results</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">i.rnd</span><span class="op">$</span><span class="va">howbad</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">i.uns</span><span class="op">$</span><span class="va">howbad</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">i.aut</span><span class="op">$</span><span class="va">howbad</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">## compare performance</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">hbad</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rnd"</span>, <span class="st">"unsupv"</span>, <span class="st">"auto"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">hbad</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">hbad</span>,col<span class="op">=</span><span class="st">"blue"</span>,ylab<span class="op">=</span><span class="st">"outlier percentile value"</span><span class="op">)</span></span>
<span><span class="co"># }</span></span>
<span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.luminwin.net" class="external-link">Min Lu</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

